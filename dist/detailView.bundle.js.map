{"version":3,"sources":["webpack:///./src/components/viewContainer/detailView/detailView.tsx","webpack:///./src/components/viewContainer/detailView/headerSection.tsx","webpack:///./src/components/viewContainer/detailView/imageSection.tsx","webpack:///./src/components/viewContainer/detailView/textSection.tsx"],"names":[],"mappings":"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","file":"detailView.bundle.js","sourcesContent":["import React, { Component, CSSProperties } from 'react';\nimport { fullscreenAbsolute } from '../../../css';\nimport { RouteComponentProps } from 'react-router-dom';\nimport Modal from '../../modal';\nimport HeaderSection from './headerSection';\nimport TextSection from './textSection';\nimport ImageSection from './imageSection';\n\ninterface Props extends RouteComponentProps {\n    id: string\n}\n\ninterface State {\n    isModalOpen: boolean\n}\n\nexport default class DetailView extends Component<Props, State> {\n\n    state: State = {\n        isModalOpen: false\n    }\n\n    private get view() {\n        return this.props.match.url.substr(1);\n    }\n\n    private get imageSrc() {\n        return `../assets/${this.view}.jpg`;\n    }\n\n    private openModal = () => this.setState({ isModalOpen: true });\n    private closeModal = () => this.setState({ isModalOpen: false });\n\n    render() {\n        return (\n            <div style={container}>\n                <img src={this.imageSrc} style={{ ...fullscreenAbsolute }}/>\n                <div style={{ ...content, ...fullscreenAbsolute }}>\n                    \n                    <div style={flexContainer}>\n                        <HeaderSection view={this.view} openModal={this.openModal}/>\n                        <TextSection view={this.view}/>\n                        <ImageSection view={this.view}/>\n                    </div>\n\n                </div>\n                {\n                    this.state.isModalOpen ? (\n                        <Modal persistent shouldClose={this.closeModal}>\n                            <h3>Modal opened from <span style={highlighted}>{this.view}</span> view</h3>\n                            <button onClick={this.closeModal}>Close modal</button>\n                        </Modal>\n                    ) : null\n                }\n            </div>\n        );\n    }\n}\n\nconst highlighted: CSSProperties = {\n    color: 'orange'\n}\n\nconst content: CSSProperties = {\n    zIndex: 10,\n    background: 'rgba(0, 0, 0, 0.7)',\n    overflowY: 'auto'\n}\n    \nconst container: CSSProperties = {\n    position: 'relative',\n    width: '100%',\n    height: '100%'\n}\n\nconst flexContainer: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '1em'\n}","import React, { CSSProperties } from 'react';\n\ninterface Props {\n    view: string\n    openModal: () => void;\n}\n\nexport default function HeaderSection(props: Props) {\n    return (\n        <div style={headerSegment}>\n            <h2 style={header}>{props.view.toUpperCase()}</h2>\n            <button onClick={props.openModal}>Open Modal</button>\n        </div>\n    )\n}\n\nconst headerSegment: CSSProperties = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n}\n\n\nconst header: CSSProperties = {\n    color: 'orange',\n    textShadow: '0px 0px 5px black'\n}","import React, { CSSProperties, Component } from 'react';\nimport Axios, { AxiosResponse } from 'axios';\n\nimport Spinner from '../../spinner';\n\ninterface Props {\n    view: string\n}\ninterface State {\n    images: string[],\n    isLoading: boolean\n}\n\nexport default class ImageSection extends Component<Props, State> {\n    /** Not a good place for the key.. well.. what the heck.. - GET YOUR OWN! */\n    readonly accessKey = \"b916ed61a761bfb1b5aac28519371fe3ea49f198a5f3cd91fa4b53d469eff249\"\n    readonly imageDatabaseApiUrl = \"https://api.unsplash.com/search/photos/\";\n\n    state: State = {\n        images: new Array(24).fill(\"\"),\n        isLoading: true\n    }\n\n    handleResponse(response: AxiosResponse) {\n        if (response.data && response.data.results) {\n            const images = response.data.results.map((img: any) => img.urls.small);\n            this.setState({ images, isLoading: false });\n        }\n    }\n\n    async componentDidMount() {\n        try {\n            const response = await Axios.get(this.imageDatabaseApiUrl, {\n                params: {\n                    client_id: this.accessKey,\n                    query: this.props.view,\n                    page: Math.round(Math.random() * 100),\n                    per_page: 24,\n                }\n            })\n            this.handleResponse(response);\n        } catch(error) {\n            console.error(error)\n        }\n    }\n\n    render() {\n        return (\n            <div style={root}>\n                {this.state.images.map((src, index) =>\n                    <div key={index} style={imageContainer}>\n                        {src ? <img src={src} style={image}/> : <Spinner/>}\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nconst root: CSSProperties = {\n    margin: '3em -1em -1em -1em',\n    display: 'flex',\n    flexWrap: 'wrap',\n    background: 'rgba(0, 0, 0, 0.7)',\n    boxShadow: '0 0px 80px 15px black'\n}\n\nconst imageContainer: CSSProperties = {\n    margin: '1em',\n    flexGrow: 1,\n    background: 'rgba(0, 0, 0, 0.5)',\n    width: '12em',\n    height: '18em'\n}\n\nconst image: CSSProperties = {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n}","import React, { CSSProperties, Component } from 'react';\nimport Axios, { AxiosResponse } from 'axios';\nimport Spinner from '../../spinner';\n\ninterface Props {\n    view: string\n}\n\ninterface State {\n    paragraphs: string[]\n    isLoading: boolean \n}\n\nexport default class TextSection extends Component<Props, State> {\n\n    state: State = {\n        paragraphs: [],\n        isLoading: true\n    }\n\n    get wikipediaApiUrl() {\n        return (\n            'http://en.wikipedia.org/w/api.php?action=parse&section=0&prop=text'\n        )\n    }\n\n    stripHtmlAndReferences(htmlText: string) {\n        var doc = new DOMParser().parseFromString(htmlText, 'text/html');\n        const text = doc.body.textContent || \"\";\n        return this.removeReferences(text)\n    }\n\n    removeReferences(text: string) {\n        return text.replace(/ *\\[[^)]*\\] */g, \"\");\n    }\n\n    handleResponse(response: AxiosResponse) {\n        const htmlPageText: string = response.data.parse.text['*'];\n        const paragraphs = this.exctractBeginingOfText(htmlPageText)\n        this.setState({ paragraphs, isLoading: false })\n    }\n\n    exctractBeginingOfText(htmlPageText: string): string[] {\n        // Split on <p>\n        const paragraphs = htmlPageText.split('<p>')\n        // Remove first content\n        paragraphs.shift();\n        // Trim end of last paragraph\n        let lastParapgraph = paragraphs.pop() || \"\";\n        lastParapgraph = lastParapgraph.substr(0, lastParapgraph.indexOf('</p>'))\n        paragraphs.push(lastParapgraph);\n        \n        return paragraphs.map((p) => this.stripHtmlAndReferences(p))\n    }\n\n    async componentDidMount() {\n        try {\n            const response = await Axios.get(this.wikipediaApiUrl, {\n                params: {\n                    page: this.props.view,\n                    origin: '*',\n                    format: 'json'\n                }\n            })\n            this.handleResponse(response);\n        } catch(error) {\n            console.error(error)\n        }\n    }\n\n    render() {\n        const { isLoading, paragraphs } = this.state\n        return (\n            <div style={root}>\n                {isLoading ? <Spinner/> : null}\n                {paragraphs.map((paragraph) =>\n                    <p key={paragraph.substr(0, 10)} style={text}>{paragraph}</p>\n                )}\n            </div>\n        )\n    }\n}\n\nconst root: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    minHeight: '15em'\n}\n\nconst text: CSSProperties = {\n    display: 'block',\n    lineHeight: '1.5',\n    fontSize: '1.1em',\n    color: 'white',\n    textShadow: '1px 1px 2px black'\n}"],"sourceRoot":""}